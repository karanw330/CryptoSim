<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradeSnap - Stock Trading Simulator</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="icon" type="image/png" href="../img/favicon.png" style="width:50px;height:50px;">
</head>

<body>
    <header class="stock-header">
        <div class="stock-header__container">
            <div class="stock-header__main">
                <a href="#" class="stock-header__logo" style="position:relative;right:10px;top:-5px;"><img
                        src="../img/favicon.png"
                        style="height:auto;width:5%;position:relative;right:10px;top:8px;">TradeSnap</a>

                <div class="stock-header__nav-center">
                    <div class="stock-header__search-container">
                        <div class="selector-container">
                            <button class="selector-button" id="selectorButton">
                                <span class="selected-text" id="selected-symbol">BTC - Bitcoin</span>
                                <svg class="arrow-icon" id="arrowIcon" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2">
                                    <polyline points="6,9 12,15 18,9"></polyline>
                                </svg>
                            </button>

                            <div class="dropdown-menu" id="dropdownMenu">
                                <ul class="dropdown-list" id="dropdownList">
                                    <!-- Items will be populated by JavaScript -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="stock-header__nav-right">
                    <button class="stock-header__btn" aria-label="Portfolio" id="stockPortfolioBtn"
                        onclick="window.location.href='./portfolio.html'">ðŸ“Š</button>
                    <div class="user-menu-container">
                        <div class="stock-header__user-avatar" role="button" tabindex="0" aria-label="User menu"
                            id="stockUserMenu">JD</div>
                        <div class="user-dropdown" id="userDropdown">
                            <button class="user-dropdown__item user-dropdown__item--danger" id="logoutBtn">
                                Logout
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="stock-ticker">
            <!-- TradingView Widget BEGIN -->
            <div class="tradingview-widget-container">
                <div class="tradingview-widget-container__widget"></div>
                <div class="tradingview-widget-copyright"><span class="blue-text"><span style="color:red;">Prices in
                            this widget are delayed</span></span></div>

                <script type="text/javascript"
                    src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
                        {
                            "symbols": [
                                {
                                    "proName": "BINANCE:BTCUSD",
                                    "title": "Bitcoin"
                                },
                                {
                                    "proName": "BINANCE:ETHUSD",
                                    "title": "Ethereum"
                                },
                                {
                                    "proName": "BINANCE:SOLUSD",
                                    "title": "Solana"
                                },
                                {
                                    "proName": "BINANCE:BNBUSD",
                                    "title": "Binance Coin"
                                },
                                {
                                    "proName": "BINANCE:XRPUSD",
                                    "title": "Ripple"
                                },
                                {
                                    "proName": "BINANCE:DOGEUSD",
                                    "title": "Dogecoin"
                                }
                            ],
                                "showSymbolLogo": true,
                                    "isTransparent": false,
                                        "displayMode": "adaptive",
                                            "colorTheme": "dark",
                                                "locale": "en"
                        }
                    </script>
            </div>
            <!-- TradingView Widget END -->
        </div>
    </header>
    <div class="container">
        <!-- Stock Information Header -->
        <div class="stock-info">
            <div class="stock-header-second">
                <div class="stock-symbol">
                    <img id="logo" width="14%" height="14%" style="border-radius:50%;margin-top: 7px;">
                    <h1 id="symbol" style="width:50%"></h1>
                    <div class="stock-name" id="fname"></div>
                </div>
                <div class="price-change">
                    <div class="current-price" id="curr_price"></div>
                    <div class="change-positive" id="change"></div>
                </div>
            </div>
            <div class="stock-metrics">
                <div class="metric">
                    <div class="metric-label">Open</div>
                    <div class="metric-value" id="open"></div>
                </div>
                <div class="metric">
                    <div class="metric-label">24h High</div>
                    <div class="metric-value" id="24H"></div>
                </div>
                <div class="metric">
                    <div class="metric-label">24h Low</div>
                    <div class="metric-value" id="24L"></div>
                </div>
                <div class="metric">
                    <div class="metric-label">Volume</div>
                    <div class="metric-value" id="volume"></div>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- TradingView Widget BEGIN -->
            <div class="chart-container" id="chart-container">
                <div style="text-align: center; padding-top: 30%; color: gray;">Loading chart...</div>
            </div>
            <!-- TradingView Widget END -->

            <!-- Trading Panel -->
            <div class="trading-panel">
                <!-- Quick Order Section -->
                <div class="panel-section" id="order_panel">
                    <div class="section-title">Quick Order</div>
                    <div class="order-tabs">
                        <button class="order-tab active" onclick="switchTab(this, 'buy')">Buy</button>
                        <button class="order-tab" onclick="switchTab(this, 'sell')">Sell</button>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Order Type</label>
                        <select class="form-select" id="order_type">
                            <option value="market">Market</option>
                            <option value="limit">Limit</option>
                            <option value="stop-limit">Stop Limit</option>
                            <option value="stop-loss">Stop Loss</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Quantity</label>
                        <input type="number" class="form-input" placeholder="0" min="1" id="order_quantity">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Limit</label>
                        <input type="number" class="form-input" placeholder="0" min="1" id="limit_value">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Stop</label>
                        <input type="number" class="form-input" placeholder="0" min="1" id="stop_value">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Estimated Total Price ($)</label>
                        <input type="number" class="form-input" placeholder="0" min="1" id="order_price">
                    </div>
                    <button class="order-button" id="quickOrderBtn" onclick="showOrderModal()">Place Buy Order</button>
                </div>

                <!-- Account Balance -->

            </div>
        </div>
        <div class="main-content bottom-section">
            <div class="panel-section balance-section">
                <div class="section-title">Account Balance</div>
                <div class="balance-item">
                    <span class="balance-label">Cash Available</span>
                    <span class="balance-value" id="cash_available">$25,847.32</span>
                </div>
                <div class="balance-item">
                    <span class="balance-label">Portfolio Value</span>
                    <span class="balance-value" id="portfolio_value">$157,234.89</span>
                </div>
                <div class="balance-item">
                    <span class="balance-label">Total Equity</span>
                    <span class="balance-value" id="total_equity">$183,082.21</span>
                </div>
                <div class="balance-item">
                    <span class="balance-label">Day P&L</span>
                    <span class="balance-value" id="day_pnl" style="color: #00ff88;">+$2,341.67</span>
                </div>
                <div class="balance-item">
                    <span class="balance-label">Buying Power</span>
                    <span class="balance-value" id="buying_power">$51,694.64</span>
                </div>
            </div>
            <div class="panel-section orders-section">
                <div class="section-title" id="current_holdings_heading">Past Orders</div>
                <span id="last">
                </span>
            </div>

            <div class="panel-section pending-section">
                <div class="section-title" id="pending_order_heading">Pending Orders</div>
                <!--<div class="card-outer-container">-->
                <span id="last_inactive_order">
                </span>
            </div>
        </div>
    </div>


    <div class="trade-modal-overlay" id="orderConfirmModal">
        <div class="order-confirm-modal" id="innerOrderModal">
            <!-- Header -->
            <div class="confirm-modal-header">
                <h3 class="confirm-modal-title">Confirm Your Order</h3>
                <button class="modal-close-btn" onclick="hideOrderModal()">Ã—</button>
            </div>

            <!-- Content -->
            <div class="confirm-modal-content">
                <!-- Order Summary -->
                <div class="order-summary-grid">
                    <div class="summary-row">
                        <span class="summary-label">Order Type</span>
                        <span class="summary-value buy-order" id="orderTypeValue">Market Buy</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Asset</span>
                        <span class="summary-value" id="assetValue">Bitcoin (BTC)</span>
                    </div>
                    <div class="summary-row" id="quan">
                        <span class="summary-label">Quantity</span>
                        <span class="summary-value" id="quantityValue">0.05 BTC</span>
                    </div>
                    <div class="summary-row" id="pric">
                        <span class="summary-label">Price</span>
                        <span class="summary-value" id="priceValue">$116,279.95</span>
                    </div>
                    <div class="summary-row total-row">
                        <span class="summary-label">Total Amount</span>
                        <span class="summary-value" id="totalValue">$5,813.99</span>
                    </div>
                </div>

                <!-- Warning -->
                <div class="order-warning">
                    <span class="warning-icon">âš </span>
                    <div class="warning-text">
                        Please review your order carefully. Market orders execute immediately at the current market
                        price and cannot be cancelled once placed.
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="modal-actions">
                    <button class="action-btn cancel-btn" onclick="hideOrderModal()">
                        Cancel
                    </button>
                    <button class="action-btn confirm-btn" onclick="orderDetails()">
                        Confirm Order
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!--hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh-->
    <div class="trade-modal-overlay" id="modify-modal">
        <div class="trx-alteration-wrapper">
            <div id="inner-modify">
                <div class="trx-alteration-topbar">
                    <h2 class="trx-alteration-heading">Modify Your Order</h2>
                    <button class="trx-dismiss-icon" onclick="dismissAlterationPanel()">âœ•</button>
                </div>

                <div class="trx-alteration-content">
                    <div class="trx-param-container">
                        <span class="trx-param-descriptor">Asset</span>
                        <span class="trx-param-display" id="trxAssetIdentifier">Bitcoin</span>
                    </div>

                    <div class="trx-param-container">
                        <span class="trx-param-descriptor">Order</span>
                        <span class="trx-param-display" id="trxOrderType">Market</span>
                    </div>

                    <div class="trx-param-container" id="trxLimitQuote">
                        <span class="trx-param-descriptor">Limit</span>
                        <input type="number" class="trx-amount-adjuster" id="trxLimitInput" value=1 min=0.01 step=0.1
                            oninput="checkOrderMod() ">
                    </div>

                    <div class="trx-param-container" id="trxStopQuote">
                        <span class="trx-param-descriptor">Stop</span>
                        <input type="number" class="trx-amount-adjuster" id="trxStopInput" value=1 min=0.01 step=0.1
                            oninput="checkOrderMod()">

                    </div>

                    <div class="trx-param-container">
                        <span class="trx-param-descriptor">Quantity</span>
                        <input type="number" class="trx-amount-adjuster" id="trxVolumeInput" value=1 min=1
                            step=0.0000001 oninput="checkOrderMod()">
                    </div>

                    <div class="trx-aggregate-container">
                        <span class="trx-param-descriptor">Total Value</span>
                        <span class="trx-aggregate-display" id="trxAggregateSum">124794.54</span>
                    </div>

                    <div class="trx-caution-panel">
                        <div class="trx-caution-symbol">âš </div>
                        <div class="trx-caution-message">
                            Modifying your order will update the quantity and total value. The changes will be reflected
                            immediately in your portfolio.
                        </div>
                    </div>

                    <div class="trx-control-cluster">
                        <button class="trx-interactive-control trx-abort-control"
                            onclick="dismissAlterationPanel()">Cancel</button>
                        <button class="trx-interactive-control trx-execute-control" onclick="update()">Confirm
                            Changes</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="ts__notification__container__x92k" id="tsNotificationContainer"></div>

    <script src="../js/RealTime.js?v=1"></script>
</body>

</html>